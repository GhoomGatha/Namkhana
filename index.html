<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Namkhana 33/11 kV Sub Station — Reports (v1.9.27f)</title>

<!-- External libraries (CDN) -->
<script src="https://cdn.sheetjs.com/xlsx-latest/package/dist/xlsx.full.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.3/html2pdf.bundle.min.js"></script>

<!-- Local Styles -->
<link rel="stylesheet" href="style.css">
</head>

<body>
<header>
  <h1>Namkhana 33/11 kV Sub Station</h1>
  <div class="line">Kakdwip Division, WBSEDCL</div>
  <div class="line">Narayanpur, Namkhana, Pin-743357</div>
  <div class="line">📱 9332793668 &nbsp;&nbsp; ✉️ nmksubstation@gmail.com</div>
</header>

<div id="last-login">Not logged in</div>

<div class="container">
  <!-- LOGIN -->
  <div id="login-screen" class="card" role="region" aria-label="Login" style="max-width:460px;margin:60px auto;text-align:center">
    <h2 style="margin:0 0 12px 0">Welcome 🙏 Please Login to continue</h2>
    <div style="display:flex;gap:12px;justify-content:center">
      <button id="operator-login-btn" class="btn btn-primary">Operator Login</button>
      <button id="admin-login-btn" class="btn btn-ghost">Admin Login</button>
    </div>

    <div id="login-forms" style="margin-top:16px;display:none;text-align:left">
      <div id="operator-form" style="display:none">
        <label class="small">Operator:
          <select id="operator-select" style="padding:8px;border-radius:6px;">
            <option value="">-- Choose --</option>
            <option>Pallab Baran Das</option>
            <option>Sukumar Ghosh</option>
            <option>Ashok Ghouri</option>
            <option>Surajit Jana</option>
            <option value="__other__">➕ Other</option>
          </select>
        </label>
        <input id="operator-other" placeholder="If Other, type full name" 
               style="display:none;padding:8px;border-radius:6px;border:1px solid #ccc;margin-left:8px;width:70%">
        <div style="margin-top:8px">
          <button id="operator-login-confirm" class="btn btn-primary">Login as Operator</button>
          <button id="operator-login-cancel" class="btn btn-ghost">Cancel</button>
        </div>
      </div>

      <div id="admin-form" style="display:none;margin-top:8px">
        <label class="small">Admin:
          <select id="admin-select" style="padding:8px;border-radius:6px;">
            <option value="">-- Choose Admin --</option>
            <option value="nmksubstation@gmail.com">nmksubstation@gmail.com</option>
            <option value="namkhanasubstation@gmail.com">namkhanasubstation@gmail.com</option>
            <option value="tech.kakdwipdiv@wbsedcl.in">tech.kakdwipdiv@wbsedcl.in</option>
          </select>
        </label>
        <div style="margin-top:8px">
          <button id="admin-login-confirm" class="btn btn-primary">Login as Admin</button>
          <button id="admin-login-cancel" class="btn btn-ghost">Cancel</button>
        </div>
      </div>
    </div>
  </div>

  <!-- APP -->
  <div id="app" style="display:none">
    <div class="card" style="display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap">
      <div>
        <div id="id-banner" style="font-weight:800"></div>
        <div id="time-banner" class="small"></div>
      </div>
      <div style="display:flex;gap:8px;align-items:center">
        <div id="who-banner" class="small"></div>
        <button id="logout-btn" class="btn btn-ghost">Logout</button>
      </div>
    </div>

    <nav class="main-tabs" role="tablist">
      <div class="main-tab active" data-tab="monthly">📑 Monthly System Reports</div>
      <div class="main-tab" data-tab="yearly">📅 Yearly System Reports</div>
      <div class="main-tab" data-tab="feeders-analytics">⚡ Feeders Analytics</div>
      <div class="main-tab" data-tab="equipment">🛠️ Equipment Register</div>
    </nav>

    <!-- Sections (Monthly, Yearly, Feeders, Equipment) -->
    <!-- Everything else is handled by script.js -->
    
    <footer style="text-align:center;margin-top:12px" class="small">
      © 2025 WBSEDCL Kakdwip Division — Namkhana Sub Station
    </footer>
  </div>
</div>

<div id="toast" role="status" aria-live="polite"></div>

<!-- Local Script -->
<script src="script.js"></script>
</body>
</html>
